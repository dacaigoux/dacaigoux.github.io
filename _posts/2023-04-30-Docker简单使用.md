---
layout: post
title: Docker简单使用
author: DaCaiGouX
date: 2023-04-30 13:19+0800
tags: 
- docker
- flask
- python
toc: true
excerpt_separator: <!--more-->
---
简单使用docker，并使用docker构建一个flask应用。
<!--more-->

## 一. 基本概念

* 镜像（Image）：操作系统分为内核空间和用户空间，对于Linux来说：内核启动后，会挂载root文件系统为其提供用户空间支持，Docker Image就相当于一个完整的root文件系统，但他是一个特殊的文件系统，除了提供容器运行时所需要的程序、资源、配置外，还包含一些为运行时准备的配制参数。镜像不包含任何动态数据，其内容在构建之后也不会被改变。

* 容器（Container）：容器与镜像的关系就像面相对象编程中的类、和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。
  
  * 数据卷的生命周期独立于容器周期，不会随着容器的消亡而消亡。

* 仓库（Repository）：一个用来集中、分发镜像的服务器

## 二. Docker的安装（Debian）

### 1. 卸载旧版本
   
   ```bash
   sudo apt-get remove docker \
               docker-engine \
               docker.io
   ```

### 2. 使用脚本自动安装
   
   ```bash
    #官方镜像
    curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
    #国内
    curl -sSL https://get.daocloud.io/docker | sh
   ```
   
### 3. 启动Docker
   
    `sudo systemctl enable docker` 命令会将 Docker 服务添加到系统的开机启动服务列表中。这样，当系统启动时，Docker 服务也会自动启动。通过这个命令，可以确保在每次系统启动时，Docker服务都会随之启动。

    `sudo systemctl start docker `命令会启动 Docker 服务并使其处于运行状态。这个命令会将 Docker 服务的启动脚本加载到系统内存，并运行该脚本来启动 Docker 服务。通过这个命令，可以保证 Docker 服务处于可用状态，可以通过 Docker CLI 或 Docker API 进行管理和操作。

   ```bash
   sudo systemctl enable docker
   sudo systemctl start docker
   ```
### 4. 建立Docker用户组
   
   ```bash
   sudo groupadd docker ##建立docker分组
   sduo usermod -aG docker $USER ##将当前用户添加到docker分组中
   ```

### 5. 测试是否正常
   
   ```bash
   docker run --rm hello-world ##--rm参数表示退出后自动清除
   ```

## 三. 使用镜像

#### 1. 获取镜像

* 从Docker仓库获取镜像
  
  ```bash
  docker pull [选项] [Docker Registry 地址[:端口号]/]仓库名[:标签]
  docker pull -help ##具体的选项可以通过该命令获取
  ```

* Docker 镜像仓库地址：地址的格式一般是 <域名/IP>[:端口号]。默认地址是 Docker Hub(docker.io)。

* 仓库名：如之前所说，这里的仓库名是两段式名称，即 <用户名>/<软件名>。对于 Docker Hub，如果不给出用户名，则默认为 library，也就是官方镜像。

